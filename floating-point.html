<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>浮動小数点数学習</title>
    <meta name="description" content="IEEE 754標準の浮動小数点数を学習。16bit/32bit/64bitの変換をステップバイステップで理解できます。">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="assets/css/custom.css">
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <!-- ヘッダー -->
    <header class="bg-white dark:bg-gray-800">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <a href="index.html" class="text-gray-600 dark:text-gray-400 hover:text-primary">← 戻る</a>
                <div>
                    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">浮動小数点数学習</h1>
                    <p class="text-sm text-gray-600 dark:text-gray-400">IEEE 754標準</p>
                </div>
            </div>
            <button id="theme-toggle" class="px-4 py-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200">
                <!-- ダークモード切り替え -->
            </button>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <main class="container mx-auto px-4 py-8 max-w-5xl">
        <!-- タブナビゲーション -->
        <div class="mb-8 border-b border-gray-200 dark:border-gray-700">
            <div class="flex space-x-4">
                <button data-tab="explanation" class="tab-button tab-button-active">説明</button>
                <button data-tab="converter" class="tab-button tab-button-inactive">浮動小数点数への変換</button>
                <button data-tab="quiz" class="tab-button tab-button-inactive">練習問題</button>
            </div>
        </div>

        <!-- 説明タブ -->
        <div data-tab-content="explanation">
            <div class="card">
                <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">浮動小数点数とは？</h2>
                <p class="mb-6 text-gray-700 dark:text-gray-300">
                    小数や非常に大きな数、小さな数を効率的に表現するIEEE 754標準の方法です。<br>
                    科学技術計算やグラフィックス処理など、広範囲の数値を扱う必要がある場面で使用されます。
                </p>

                <h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">形式の種類</h3>
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="step-card">
                        <h4 class="text-lg font-bold mb-3 text-gray-900 dark:text-white">16ビット（半精度）</h4>
                        <table class="w-full text-sm">
                            <tr><td class="py-1">符号部</td><td class="font-bold">1ビット</td></tr>
                            <tr><td class="py-1">指数部</td><td class="font-bold">5ビット</td></tr>
                            <tr><td class="py-1">仮数部</td><td class="font-bold">10ビット</td></tr>
                            <tr><td class="py-1">バイアス</td><td class="font-bold">15</td></tr>
                        </table>
                        <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">GPU・機械学習で使用</p>
                    </div>

                    <div class="step-card border-primary">
                        <h4 class="text-lg font-bold mb-3 text-gray-900 dark:text-white">32ビット（単精度）</h4>
                        <table class="w-full text-sm">
                            <tr><td class="py-1">符号部</td><td class="font-bold">1ビット</td></tr>
                            <tr><td class="py-1">指数部</td><td class="font-bold">8ビット</td></tr>
                            <tr><td class="py-1">仮数部</td><td class="font-bold">23ビット</td></tr>
                            <tr><td class="py-1">バイアス</td><td class="font-bold">127</td></tr>
                        </table>
                        <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">最も一般的</p>
                    </div>

                    <div class="step-card">
                        <h4 class="text-lg font-bold mb-3 text-gray-900 dark:text-white">64ビット（倍精度）</h4>
                        <table class="w-full text-sm">
                            <tr><td class="py-1">符号部</td><td class="font-bold">1ビット</td></tr>
                            <tr><td class="py-1">指数部</td><td class="font-bold">11ビット</td></tr>
                            <tr><td class="py-1">仮数部</td><td class="font-bold">52ビット</td></tr>
                            <tr><td class="py-1">バイアス</td><td class="font-bold">1023</td></tr>
                        </table>
                        <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">高精度計算用</p>
                    </div>
                </div>

                <h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">構成要素</h3>
                <div class="grid md:grid-cols-3 gap-4 mb-6">
                    <div class="step-card">
                        <h4 class="font-bold text-gray-900 dark:text-white mb-2">符号部</h4>
                        <p class="text-sm text-gray-700 dark:text-gray-300">
                            0 = 正の数<br>
                            1 = 負の数
                        </p>
                    </div>
                    <div class="step-card">
                        <h4 class="font-bold text-gray-900 dark:text-white mb-2">指数部</h4>
                        <p class="text-sm text-gray-700 dark:text-gray-300">
                            バイアス表現を使用<br>
                            実際の指数 = 値 - バイアス
                        </p>
                    </div>
                    <div class="step-card">
                        <h4 class="font-bold text-gray-900 dark:text-white mb-2">仮数部</h4>
                        <p class="text-sm text-gray-700 dark:text-gray-300">
                            暗黙の1.xxxxx形式<br>
                            小数部分のみを格納
                        </p>
                    </div>
                </div>

                <div class="step-card">
                    <h3 class="text-xl font-bold mb-3 text-gray-900 dark:text-white">計算式</h3>
                    <div class="code-block">
値 = (-1)^符号 × (1 + 仮数部/2^仮数部ビット数) × 2^(指数部-バイアス)
                    </div>
                </div>
            </div>

            <!-- 具体例 -->
            <div class="card">
                <h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">具体例: 0.1015625の変換</h3>
                <div class="space-y-3 text-gray-700 dark:text-gray-300">
                    <p><strong>① 2進数に変換:</strong> 0.0001101₂</p>
                    <p><strong>② 正規化:</strong> 1.101 × 2⁻⁴</p>
                    <p><strong>③ 指数部:</strong> -4 + 127 = 123 = 01111011₂</p>
                    <p><strong>④ 仮数部:</strong> 10100000000000000000000₂</p>
                    <p><strong>⑤ 最終結果:</strong> 0 01111011 10100000000000000000000</p>
                </div>
            </div>
        </div>

        <!-- 変換タブ -->
        <div data-tab-content="converter" class="hidden">
            <div class="card">
                <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">実数から浮動小数点数への変換</h2>

                <!-- 設定 -->
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3">ビット形式</label>
                        <select id="bit-format" class="input-field">
                            <option value="16">16bit (半精度) - GPU・機械学習</option>
                            <option value="32" selected>32bit (単精度) - 一般的</option>
                            <option value="64">64bit (倍精度) - 高精度</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3">入力形式</label>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="input-type" value="decimal" checked class="mr-2">
                                <span class="text-gray-700 dark:text-gray-300">10進数</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="input-type" value="binary" class="mr-2">
                                <span class="text-gray-700 dark:text-gray-300">2進数</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 入力 -->
                <div class="mb-6">
                    <label class="block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3">数値を入力</label>
                    <div class="flex gap-3">
                        <input type="text" id="fp-input" class="input-field flex-1" placeholder="例: 0.1015625, -3.14, 2.5" value="0.1015625">
                        <button id="convert-btn" class="btn-primary px-8">変換実行</button>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">
                        💡 正の数・負の数どちらも入力できます
                    </p>
                </div>

                <!-- 結果表示エリア -->
                <div id="conversion-results" class="hidden">
                    <!-- 2進数情報 -->
                    <div id="binary-info" class="hidden"></div>

                    <!-- ステップ表示 -->
                    <div id="conversion-steps" class="space-y-6 mb-6"></div>

                    <!-- 最終結果 -->
                    <div class="mb-6">
                        <h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">🎯 最終結果</h3>
                        <div id="final-result"></div>
                    </div>

                    <!-- 検証 -->
                    <div>
                        <h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">✅ 検証</h3>
                        <div id="verification"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 練習問題タブ -->
        <div data-tab-content="quiz" class="hidden">
            <div class="card">
                <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">練習問題</h2>

                <div class="space-y-6">
                    <!-- 問題1 -->
                    <div class="step-card">
                        <h3 class="text-lg font-bold mb-3 text-gray-900 dark:text-white">問題1: 2.0の表現</h3>
                        <p class="mb-3 text-gray-700 dark:text-gray-300">
                            <strong>2.0をIEEE 754形式（32bit）で表現した場合、バイアス付き指数部は？</strong>
                        </p>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                            ヒント: 2.0 = 1.0 × 2¹
                        </p>
                        <input type="number" class="input-field mb-2" placeholder="答えを入力">
                        <p class="text-sm text-green-600 dark:text-green-400">
                            正解: 128 (指数1 + バイアス127)
                        </p>
                    </div>

                    <!-- 問題2 -->
                    <div class="step-card">
                        <h3 class="text-lg font-bold mb-3 text-gray-900 dark:text-white">問題2: 0.5の表現</h3>
                        <p class="mb-3 text-gray-700 dark:text-gray-300">
                            <strong>0.5のバイアス付き指数部は？</strong>
                        </p>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                            ヒント: 0.5 = 1.0 × 2⁻¹
                        </p>
                        <input type="number" class="input-field mb-2" placeholder="答えを入力">
                        <p class="text-sm text-green-600 dark:text-green-400">
                            正解: 126 (指数-1 + バイアス127)
                        </p>
                    </div>

                    <!-- 問題3 -->
                    <div class="step-card">
                        <h3 class="text-lg font-bold mb-3 text-gray-900 dark:text-white">問題3: 特殊値</h3>
                        <p class="mb-3 text-gray-700 dark:text-gray-300">
                            <strong>無限大を表現する場合、指数部と仮数部はどうなる？</strong>
                        </p>
                        <div class="text-sm text-green-600 dark:text-green-400 mt-4 space-y-1">
                            <p><strong>正解:</strong></p>
                            <p>• 指数部: すべて1 (32bitの場合 11111111)</p>
                            <p>• 仮数部: すべて0</p>
                            <p>• 符号部で正の無限大(0)か負の無限大(1)を区別</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- フッター -->
    <footer class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
        <div class="container mx-auto px-4 py-8 text-center">
            <p class="mb-2 text-gray-600 dark:text-gray-400">浮動小数点数学習</p>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                <a href="index.html" class="text-primary hover:underline">ホーム</a> |
                <a href="shift-operation.html" class="text-primary hover:underline">シフト演算学習</a> |
                <a href="https://forms.gle/example" target="_blank" class="text-primary hover:underline">フィードバック</a>
            </p>
            <p class="text-sm text-gray-600 dark:text-gray-400">
                © 2022-2025 <span class="font-semibold text-primary">Dit-Lab.(Daiki Ito)</span>. All Rights Reserved.
            </p>
        </div>
    </footer>

    <script src="assets/js/main.js"></script>
    <script src="assets/js/floating.js"></script>
</body>
</html>
